<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bonnaroo 2025 Interactive Schedule</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #121212;
            color: white;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        header {
            text-align: center;
            margin-bottom: 30px;
            background-color: #333;
            padding: 20px;
            border-radius: 10px;
        }
        .logo {
            width: 200px;
            margin-bottom: 10px;
        }
        h1 {
            margin: 0;
            color: #9de450;
        }
        .schedule-container {
            overflow-x: auto;
            margin-bottom: 30px;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            margin-bottom: 20px;
        }
        th, td {
            padding: 12px;
            text-align: center;
            border: 1px solid #444;
            position: relative;
        }
        th {
            background-color: #333;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        .what-stage { background-color: rgba(155, 227, 90, 0.3); }
        .other-stage { background-color: rgba(246, 116, 54, 0.3); }
        .infinity { background-color: rgba(253, 123, 156, 0.3); }
        .this-tent { background-color: rgba(118, 91, 240, 0.3); }
        .that-tent { background-color: rgba(86, 205, 204, 0.3); }
        .which-stage { background-color: rgba(255, 255, 0, 0.3); }
        
        th.what-stage { background-color: #9BE35A; color: black; }
        th.other-stage { background-color: #F67436; color: black; }
        th.infinity { background-color: #FD7B9C; color: black; }
        th.this-tent { background-color: #765BF0; color: white; }
        th.that-tent { background-color: #56CDCC; color: black; }
        th.which-stage { background-color: #FFFF00; color: black; }
        
        .time-column {
            min-width: 100px;
            background-color: #272727;
            font-weight: bold;
        }
        .act {
            border-radius: 5px;
            padding: 5px;
            position: relative;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .act:hover {
            opacity: 0.9;
            background-color: rgba(255, 255, 255, 0.1);
        }
        .priority-high {
            border: 3px solid gold;
        }
        .priority-medium {
            border: 3px solid silver;
        }
        .priority-low {
            border: 3px solid #cd7f32;
        }
        .comments {
            margin-top: 10px;
            font-size: 12px;
            color: #ddd;
            pointer-events: none;
        }
        .modal {
            display: none;
            position: fixed;
            z-index: 100;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.7);
        }
        .modal-content {
            background-color: #333;
            margin: 10% auto;
            padding: 20px;
            border-radius: 10px;
            width: 80%;
            max-width: 500px;
        }
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        .close:hover {
            color: white;
        }
        textarea {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            background-color: #444;
            border: none;
            border-radius: 5px;
            color: white;
        }
        .button {
            background-color: #9de450;
            color: black;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }
        .button:hover {
            background-color: #8bc440;
        }
        .priority-buttons {
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
        }
        .priority-btn {
            padding: 5px 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s ease;
            opacity: 0.7;
        }
        .priority-btn:hover {
            opacity: 1;
            transform: scale(1.05);
        }
        .high { background-color: gold; color: black; }
        .medium { background-color: silver; color: black; }
        .low { background-color: #cd7f32; color: black; }
        .none { background-color: #666; color: white; }
        
        .controls {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            flex-wrap: wrap;
            align-items: center;
        }
        .filter-group {
            margin-bottom: 10px;
        }
        .filter-label {
            margin-right: 10px;
            font-weight: bold;
        }
        .day-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }
        .day-btn {
            padding: 8px 15px;
            background-color: #444;
            border: none;
            border-radius: 5px;
            color: white;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .day-btn:hover {
            background-color: #555;
        }
        .day-btn.active {
            background-color: #9de450;
            color: black;
        }
        .username-container {
            margin-bottom: 20px;
        }
        .username-input {
            padding: 8px;
            background-color: #444;
            border: none;
            border-radius: 5px;
            color: white;
            margin-right: 10px;
        }
        .acts-list {
            margin-top: 20px;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        .act-chip {
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
        }
        .footer {
            text-align: center;
            padding: 20px;
            color: #999;
        }
        
        @media (max-width: 768px) {
            th, td {
                padding: 6px;
                font-size: 12px;
            }
            .add-comment {
                font-size: 16px;
                width: 20px;
                height: 20px;
                line-height: 20px;
            }
            .modal-content {
                width: 95%;
                margin: 5% auto;
            }
            .controls {
                flex-direction: column;
            }
            .filter-group {
                margin-bottom: 15px;
            }
        }
        
        .existing-comments {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #444;
        }
        
        .existing-comments h3 {
            color: #9de450;
            margin-bottom: 10px;
        }
        
        .comment-item {
            background-color: #333;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 5px;
            display: flex;
            align-items: baseline;
            gap: 8px;
        }
        
        .comment-username {
            color: #9de450;
            font-weight: bold;
            white-space: nowrap;
        }
        
        .comment-text {
            color: white;
            flex-grow: 1;
        }
        
        .delete-comment {
            color: #ff6b6b;
            cursor: pointer;
            font-size: 1.2em;
            padding: 0 5px;
            opacity: 0.7;
            transition: opacity 0.2s;
        }
        
        .delete-comment:hover {
            opacity: 1;
        }
        
        #commentsList {
            max-height: 200px;
            overflow-y: auto;
        }
        
        .user-list {
            margin-top: 5px;
            font-size: 12px;
            color: #ddd;
        }
        
        .user-item {
            display: inline-block;
            margin-right: 8px;
            padding: 2px 5px;
            border-radius: 3px;
        }
        
        .user-priority-high {
            border: 2px solid gold;
        }
        
        .user-priority-medium {
            border: 2px solid silver;
        }
        
        .user-priority-low {
            border: 2px solid #cd7f32;
        }
        
        .priority-legend {
            margin-top: 15px;
            color: #ddd;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .sample-outline {
            padding: 2px 8px;
            border-radius: 3px;
            font-size: 12px;
            color: black;
            background-color: #ddd;
        }

        .sample-outline.high {
            border: 2px solid gold;
            background-color: gold;
        }

        .sample-outline.medium {
            border: 2px solid silver;
            background-color: silver;
        }

        .sample-outline.low {
            border: 2px solid #cd7f32;
            background-color: #cd7f32;
        }
    </style>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-database-compat.js"></script>
    <script>
        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyC6x1_4tVJGv2ycKc3Uc-U4wwwBRcYQnWo",
            authDomain: "luminoushedgehog-4e4f5.firebaseapp.com",
            databaseURL: "https://luminoushedgehog-4e4f5-default-rtdb.firebaseio.com",
            projectId: "luminoushedgehog-4e4f5",
            storageBucket: "luminoushedgehog-4e4f5.firebasestorage.app",
            messagingSenderId: "754666583985",
            appId: "1:754666583985:web:4ecea8d2c6121e452faf90"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
    </script>
</head>
<body>
    <div class="container">
        <header>
            <h1>Bonnaroo 2025 Interactive Schedule</h1>
            <p>June 12-15, 2025 â€¢ Manchester, TN</p>
        </header>
        
        <div class="username-container">
            <input type="text" id="username" class="username-input" placeholder="Enter your name">
            <button class="button" onclick="setUsername()">Set Name</button>
        </div>
        
        <div class="controls">
            <div class="day-selector">
                <button class="day-btn active" data-day="thursday">Thursday</button>
                <button class="day-btn" data-day="friday">Friday</button>
                <button class="day-btn" data-day="saturday">Saturday</button>
                <button class="day-btn" data-day="sunday">Sunday</button>
            </div>
            <div class="priority-legend">
                Priority Color Key: 
                <span class="legend-item">
                    <span class="sample-outline high">High</span>
                </span>
                <span class="legend-item">
                    <span class="sample-outline medium">Medium</span>
                </span>
                <span class="legend-item">
                    <span class="sample-outline low">Low</span>
                </span>
            </div>
        </div>
        
        <div class="schedule-container">
            <table id="schedule">
                <thead>
                    <tr>
                        <th class="time-column">Time</th>
                        <th class="what-stage">What Stage</th>
                        <th class="which-stage">Which Stage</th>
                        <th class="other-stage">Other Stage</th>
                        <th class="infinity">Infinity</th>
                        <th class="this-tent">This Tent</th>
                        <th class="that-tent">That Tent</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Schedule rows will be generated by JavaScript -->
                </tbody>
            </table>
        </div>
        
        <h2>Your Priority Acts</h2>
        <div class="acts-list" id="priorityActsList">
            <!-- Priority acts will be generated here -->
        </div>
        
        <div id="commentModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeModal()">&times;</span>
                <h2 id="modalTitle">Add Comment</h2>
                <p id="modalActName"></p>
                <div class="priority-buttons">
                    <button class="priority-btn high" onclick="setPriority('high')">High Priority</button>
                    <button class="priority-btn medium" onclick="setPriority('medium')">Medium</button>
                    <button class="priority-btn low" onclick="setPriority('low')">Low Priority</button>
                    <button class="priority-btn none" onclick="setPriority('none')">No Priority</button>
                </div>
                <textarea id="commentInput" placeholder="Add your comment here..."></textarea>
                <button class="button" onclick="saveComment()">Save</button>
                
                <div id="existingComments" class="existing-comments">
                    <h3>Existing Comments</h3>
                    <div id="commentsList"></div>
                </div>
            </div>
        </div>
        
        <div class="footer">
            <p>Interactive Bonnaroo Schedule Planner. Share this page with friends to coordinate your festival experience!</p>
        </div>
    </div>

    <script>
        // Schedule data
        const scheduleData = {
            thursday: [
            { time: '3:00-3:15', what: '', other: '', infinity: '', this: 'Die Spitz', that: '' },
            { time: '3:15-3:45', what: '', other: '', infinity: 'DJ Python', this: 'Die Spitz', that: 'The Droptines' },
            { time: '3:45-4:00', what: '', other: '', infinity: 'DJ Python', this: '', that: 'The Droptines' },
            { time: '4:00-4:15', what: '', other: '', infinity: 'DJ Python', this: '', that: '' },
            { time: '4:15-4:45', what: '', other: '', infinity: '', this: 'Kitchen Dwellers', that: '' },
            { time: '4:45-5:15', what: '', other: '', infinity: '', this: 'Kitchen Dwellers', that: 'Sofia Isella' },
            { time: '5:15-5:30', what: '', other: 'Azzecca', infinity: '', this: '', that: 'Sofia Isella' },
            { time: '5:30-5:45', what: '', other: 'Azzecca', infinity: 'Tinzo + JoJo', this: '', that: '' },
            { time: '5:45-6:15', what: 'Wilderado', other: 'Azzecca', infinity: 'Tinzo + JoJo', this: '', that: '' },
            { time: '6:15-6:30', what: 'Wilderado', other: '', infinity: 'Tinzo + JoJo', this: 'The Lemon Twigs', that: 'Hey, Nothing' },
            { time: '6:30-7:00', what: '', other: 'Max Styler', infinity: '', this: 'The Lemon Twigs', that: 'Hey, Nothing' },
            { time: '7:00-7:30', what: '', other: 'Max Styler', infinity: 'Parisi', this: '', that: '' },
            { time: '7:30-7:45', what: '', other: '', infinity: 'Parisi', this: '', that: '' },
            { time: '7:45-8:00', what: 'Marcus King', other: 'Green Velvet', infinity: 'Parisi', this: 'Dogs In A Pile', that: 'Wisp' },
            { time: '8:00-8:15', what: 'Marcus King', other: 'Green Velvet', infinity: '', this: 'Dogs In A Pile', that: 'Wisp' },
            { time: '8:15-8:30', what: '', other: 'Green Velvet', infinity: '', this: 'Dogs In A Pile', that: 'Wisp' },
            { time: '8:30-8:45', what: '', other: 'Green Velvet', infinity: 'Of The Trees B2B Tape B', this: 'Dogs In A Pile', that: 'Wisp' },
            { time: '8:45-9:00', what: '', other: '', infinity: 'Of The Trees B2B Tape B', this: '', that: '' },
            { time: '9:00-9:30', what: 'Luke Combs', other: 'Sammy Virji', infinity: 'Of The Trees B2B Tape B', this: '', that: '' },
            { time: '9:30-10:00', what: 'Luke Combs', other: 'Sammy Virji', infinity: '', this: '', that: '' },
            { time: '10:00-10:30', what: 'Luke Combs', other: '', infinity: 'Rebecca Black', this: '', that: '' },
            { time: '10:30-10:45', what: 'Luke Combs', other: '', infinity: 'Rebecca Black', this: '', that: '2hollis' },
            { time: '10:45-11:00', what: '', other: '', infinity: 'Rebecca Black', this: 'Daniel Donato\'s Cosmic Country', that: '2hollis' },
            { time: '11:00-11:30', what: '', other: 'Dom Dolla', infinity: '', this: 'Daniel Donato\'s Cosmic Country', that: '2hollis' },
            { time: '11:30-11:45', what: '', other: 'Dom Dolla', infinity: '', this: 'Daniel Donato\'s Cosmic Country', that: '' },
            { time: '11:45-12:15AM', what: '', other: 'Dom Dolla', infinity: '', this: '', that: '' },
            { time: '12:15-12:30AM', what: '', other: 'Dom Dolla', infinity: '', this: '', that: 'Joey Valence & Brae' },
            { time: '12:30-1:00AM', what: '', other: 'Dom Dolla', infinity: '', this: 'Insane Clown Posse', that: 'Joey Valence & Brae' },
            { time: '1:00-1:15AM', what: '', other: '', infinity: 'Tractorbeam', this: 'Insane Clown Posse', that: 'Joey Valence & Brae' },
            { time: '1:15-1:30AM', what: '', other: '', infinity: 'Tractorbeam', this: 'Insane Clown Posse', that: '' },
            { time: '1:30-2:00AM', what: '', other: '', infinity: 'Tractorbeam', this: '', that: '' }
            ],
            friday: [
                { time: '1:00-1:30', what: '', which: '', other: '', infinity: '', this: 'Bebe Stockwell', that: '' },
                { time: '1:30-1:45', what: '', which: '', other: '', infinity: '', this: 'Bebe Stockwell', that: 'Ginger Root' },
                { time: '1:45-2:00', what: '', which: '', other: '', infinity: 'Airrica', this: '', that: 'Ginger Root' },
                { time: '2:00-2:15', what: '', which: '', other: '', infinity: 'Airrica', this: '', that: 'Ginger Root' },
                { time: '2:15-2:30', what: '', which: '', other: '', infinity: 'Airrica', this: 'Matt Champion', that: '' },
                { time: '2:30-2:45', what: '', which: 'Rachel Chinouriri', other: '', infinity: '', this: 'Matt Champion', that: '' },
                { time: '2:45-3:00', what: '', which: 'Rachel Chinouriri', other: '', infinity: '', this: 'Matt Champion', that: 'Leon Thomas' },
                { time: '3:00-3:15', what: 'Aly & AJ', which: 'Rachel Chinouriri', other: '', infinity: '', this: '', that: 'Leon Thomas' },
                { time: '3:15-3:30', what: 'Aly & AJ', which: '', other: '', infinity: 'Kamino', this: '', that: 'Leon Thomas' },
                { time: '3:30-3:45', what: 'Aly & AJ', which: '', other: '', infinity: 'Kamino', this: '', that: '' },
                { time: '3:45-4:00', what: '', which: '', other: '', infinity: 'Kamino', this: 'Cults', that: '' },
                { time: '4:00-4:15', what: '', which: 'Slightly Stoopid', other: 'Effin', infinity: '', this: 'Cults', that: '' },
                { time: '4:15-4:30', what: '', which: 'Slightly Stoopid', other: 'Effin', infinity: '', this: 'Cults', that: 'Mannequin Pussy' },
                { time: '4:30-4:45', what: '', which: 'Slightly Stoopid', other: 'Effin', infinity: '', this: 'Cults', that: 'Mannequin Pussy' },
                { time: '4:45-5:00', what: 'Flipturn', which: 'Slightly Stoopid', other: 'Effin', infinity: '', this: '', that: 'Mannequin Pussy' },
                { time: '5:00-5:15', what: 'Flipturn', which: '', other: '', infinity: 'Omnom', this: '', that: 'Mannequin Pussy' },
                { time: '5:15-5:30', what: 'Flipturn', which: '', other: 'Eater', infinity: 'Omnom', this: 'M.I. Lenderman', that: '' },
                { time: '5:30-5:45', what: 'Flipturn', which: '', other: 'Eater', infinity: 'Omnom', this: 'M.I. Lenderman', that: '' },
                { time: '5:45-6:00', what: '', which: 'Wallows', other: 'Eater', infinity: '', this: 'M.I. Lenderman', that: 'Bossman Dlow' },
                { time: '6:00-6:15', what: '', which: 'Wallows', other: 'Eater', infinity: '', this: 'M.I. Lenderman', that: 'Bossman Dlow' },
                { time: '6:15-6:30', what: '', which: 'Wallows', other: '', infinity: '', this: '', that: 'Bossman Dlow' },
                { time: '6:30-6:45', what: '', which: 'Wallows', other: 'Detox Unit', infinity: '', this: '', that: 'Bossman Dlow' },
                { time: '6:45-7:00', what: 'Foster The People', which: '', other: 'Detox Unit', infinity: 'Ayybo', this: '', that: '' },
                { time: '7:00-7:15', what: 'Foster The People', which: '', other: 'Detox Unit', infinity: 'Ayybo', this: 'King Gizzard & The Lizard Wizard', that: '' },
                { time: '7:15-7:30', what: 'Foster The People', which: '', other: 'Detox Unit', infinity: 'Ayybo', this: 'King Gizzard & The Lizard Wizard', that: '' },
                { time: '7:30-7:45', what: '', which: 'The Red Clay Strays', other: '', infinity: '', this: 'King Gizzard & The Lizard Wizard', that: 'Damiano David' },
                { time: '7:45-8:00', what: '', which: 'The Red Clay Strays', other: 'Levity', infinity: '', this: 'King Gizzard & The Lizard Wizard', that: 'Damiano David' },
                { time: '8:00-8:15', what: '', which: 'The Red Clay Strays', other: 'Levity', infinity: '', this: 'King Gizzard & The Lizard Wizard', that: 'Damiano David' },
                { time: '8:15-8:30', what: '', which: 'The Red Clay Strays', other: 'Levity', infinity: '', this: 'King Gizzard & The Lizard Wizard', that: 'Damiano David' },
                { time: '8:30-8:45', what: '', which: 'The Red Clay Strays', other: 'Levity', infinity: '', this: 'King Gizzard & The Lizard Wizard', that: '' },
                { time: '8:45-9:00', what: 'John Summit', which: '', other: '', infinity: '', this: 'King Gizzard & The Lizard Wizard', that: '' },
                { time: '9:00-9:15', what: 'John Summit', which: '', other: 'Inzo', infinity: '', this: 'King Gizzard & The Lizard Wizard', that: '' },
                { time: '9:15-9:30', what: 'John Summit', which: '', other: 'Inzo', infinity: '', this: '', that: '' },
                { time: '9:30-9:45', what: 'John Summit', which: 'Goose', other: '', infinity: '', this: '', that: 'Rainbow Kitten Surprise' },
                { time: '9:45-10:00', what: '', which: 'Goose', other: '', infinity: '', this: 'Marina', that: 'Rainbow Kitten Surprise' },
                { time: '10:00-10:15', what: '', which: 'Goose', other: '', infinity: '', this: 'Marina', that: 'Rainbow Kitten Surprise' },
                { time: '10:15-10:30', what: '', which: 'Goose', other: 'Tape B', infinity: '', this: 'Marina', that: 'Rainbow Kitten Surprise' },
                { time: '10:30-10:45', what: '', which: 'Goose', other: 'Tape B', infinity: '', this: 'Marina', that: 'Rainbow Kitten Surprise' },
                { time: '10:45-11:00', what: '', which: 'Goose', other: 'Tape B', infinity: '', this: '', that: '' },
                { time: '11:00-11:15', what: 'Tyler, The Creator', which: '', other: 'Tape B', infinity: 'Itsmurph', this: '', that: '' },
                { time: '11:15-11:30', what: 'Tyler, The Creator', which: '', other: '', infinity: 'Itsmurph', this: '', that: '' },
                { time: '11:30-11:45', what: 'Tyler, The Creator', which: '', other: '', infinity: 'Itsmurph', this: '', that: '' },
                { time: '11:45-12:00', what: 'Tyler, The Creator', which: '', other: '', infinity: 'Itsmurph', this: '', that: '' },
                { time: '12:00-12:15', what: 'Tyler, The Creator', which: '', other: 'Of The Trees', infinity: 'Itsmurph', this: '', that: '' },
                { time: '12:15-12:30', what: '', which: 'Glass Animals', other: 'Of The Trees', infinity: 'Itsmurph', this: '', that: '' },
                { time: '12:30-12:45', what: '', which: 'Glass Animals', other: 'Of The Trees', infinity: '', this: 'JPEGMAFIA', that: 'Megadeth' },
                { time: '12:45-1:00', what: '', which: 'Glass Animals', other: 'Of The Trees', infinity: '', this: 'JPEGMAFIA', that: 'Megadeth' },
                { time: '1:00-1:15', what: '', which: 'Glass Animals', other: '', infinity: '', this: 'JPEGMAFIA', that: 'Megadeth' },
                { time: '1:15-1:30', what: '', which: 'Glass Animals', other: '', infinity: '', this: 'JPEGMAFIA', that: 'Megadeth' },
                { time: '1:30-1:45', what: '', which: '', other: 'Tipper', infinity: '', this: 'JPEGMAFIA', that: 'Megadeth' },
                { time: '1:45-2:00', what: '', which: '', other: 'Tipper', infinity: 'John Summit', this: '', that: 'Megadeth' },
                { time: '2:00-2:15', what: '', which: '', other: 'Tipper', infinity: 'John Summit', this: '', that: '' },
                { time: '2:15-2:30', what: '', which: '', other: '', infinity: 'John Summit', this: '', that: '' },
                { time: '2:30-2:45', what: '', which: '', other: '', infinity: 'John Summit', this: '', that: '' },
                { time: '2:45-3:00', what: '', which: '', other: '', infinity: 'John Summit', this: '', that: '' }
            ],
            saturday: [
                { time: '1:30-1:45', what: '', which: '', other: '', infinity: 'Melt', this: '', that: 'Destroy Boys' },
                { time: '1:45-2:00', what: '', which: '', other: '', infinity: 'Melt', this: '', that: 'Destroy Boys' },
                { time: '2:00-2:15', what: '', which: '', other: '', infinity: 'Melt', this: 'The Stews', that: 'Destroy Boys' },
                { time: '2:15-2:30', what: '', which: 'Thee Sinseers and The Altons', other: '', infinity: '', this: 'The Stews', that: '' },
                { time: '2:30-2:45', what: '', which: 'Thee Sinseers and The Altons', other: '', infinity: '', this: 'The Stews', that: '' },
                { time: '2:45-3:00', what: '', which: 'Thee Sinseers and The Altons', other: '', infinity: '', this: '', that: 'Dadi Freyr' },
                { time: '3:00-3:15', what: 'Gigi Perez', which: '', other: '', infinity: 'Cameron Winter', this: '', that: 'Dadi Freyr' },
                { time: '3:15-3:30', what: 'Gigi Perez', which: '', other: '', infinity: 'Cameron Winter', this: '', that: 'Dadi Freyr' },
                { time: '3:30-3:45', what: 'Gigi Perez', which: '', other: '', infinity: 'Cameron Winter', this: 'Ziggy Alberts', that: '' },
                { time: '3:45-4:00', what: '', which: 'Flatland Cavalry', other: 'Ahee', infinity: '', this: 'Ziggy Alberts', that: '' },
                { time: '4:00-4:15', what: '', which: 'Flatland Cavalry', other: 'Ahee', infinity: '', this: 'Ziggy Alberts', that: '' },
                { time: '4:15-4:30', what: '', which: 'Flatland Cavalry', other: 'Ahee', infinity: '', this: '', that: 'Hot Mulligan' },
                { time: '4:30-4:45', what: 'Raye', which: 'Flatland Cavalry', other: 'Ahee', infinity: '', this: '', that: 'Hot Mulligan' },
                { time: '4:45-5:00', what: 'Raye', which: '', other: '', infinity: 'Mary Droppinz', this: '', that: 'Hot Mulligan' },
                { time: '5:00-5:15', what: 'Raye', which: '', other: 'Rossy', infinity: 'Mary Droppinz', this: 'Dope Lemon', that: '' },
                { time: '5:15-5:30', what: 'Raye', which: '', other: 'Rossy', infinity: 'Mary Droppinz', this: 'Dope Lemon', that: '' },
                { time: '5:30-5:45', what: '', which: 'Jessie Murph', other: 'Rossy', infinity: '', this: 'Dope Lemon', that: '' },
                { time: '5:45-6:00', what: '', which: 'Jessie Murph', other: 'Rossy', infinity: '', this: 'Dope Lemon', that: 'Action Bronson' },
                { time: '6:00-6:15', what: '', which: 'Jessie Murph', other: 'Rossy', infinity: '', this: 'Dope Lemon', that: 'Action Bronson' },
                { time: '6:15-6:30', what: 'Beabadoobee', which: 'Jessie Murph', other: 'What So Not', infinity: '', this: '', that: 'Action Bronson' },
                { time: '6:30-6:45', what: 'Beabadoobee', which: '', other: 'What So Not', infinity: 'Big Gigantic (DJ Set)', this: '', that: 'Action Bronson' },
                { time: '6:45-7:00', what: 'Beabadoobee', which: '', other: 'What So Not', infinity: 'Big Gigantic (DJ Set)', this: 'Wave To Earth', that: '' },
                { time: '7:00-7:15', what: 'Beabadoobee', which: '', other: 'What So Not', infinity: 'Big Gigantic (DJ Set)', this: 'Wave To Earth', that: '' },
                { time: '7:15-7:30', what: '', which: '', other: '', infinity: 'Big Gigantic (DJ Set)', this: 'Wave To Earth', that: '' },
                { time: '7:30-7:45', what: '', which: 'Mt. Joy', other: 'Claptone', infinity: '', this: 'Wave To Earth', that: 'Tyla' },
                { time: '7:45-8:00', what: '', which: 'Mt. Joy', other: 'Claptone', infinity: '', this: '', that: 'Tyla' },
                { time: '8:00-8:15', what: '', which: 'Mt. Joy', other: 'Claptone', infinity: '', this: '', that: 'Tyla' },
                { time: '8:15-8:30', what: 'Avril Lavigne', which: 'Mt. Joy', other: 'Claptone', infinity: '', this: '', that: 'Tyla' },
                { time: '8:30-8:45', what: 'Avril Lavigne', which: '', other: '', infinity: 'Levity', this: '', that: '' },
                { time: '8:45-9:00', what: 'Avril Lavigne', which: '', other: 'Jade Cicada', infinity: 'Levity', this: 'REAL WOLF & INSANELY FINE 1970\'S POOL PARTY SUPERJAM', that: '' },
                { time: '9:00-9:15', what: 'Avril Lavigne', which: '', other: 'Jade Cicada', infinity: 'Levity', this: 'REAL WOLF & INSANELY FINE 1970\'S POOL PARTY SUPERJAM', that: '' },
                { time: '9:15-9:30', what: 'Avril Lavigne', which: '', other: 'Jade Cicada', infinity: 'Levity', this: 'REAL WOLF & INSANELY FINE 1970\'S POOL PARTY SUPERJAM', that: 'Modest Mouse' },
                { time: '9:30-9:45', what: '', which: 'Nelly', other: '', infinity: '', this: 'REAL WOLF & INSANELY FINE 1970\'S POOL PARTY SUPERJAM', that: 'Modest Mouse' },
                { time: '9:45-10:00', what: '', which: 'Nelly', other: '', infinity: '', this: 'REAL WOLF & INSANELY FINE 1970\'S POOL PARTY SUPERJAM', that: 'Modest Mouse' },
                { time: '10:00-10:15', what: '', which: 'Nelly', other: 'RL Grime', infinity: '', this: 'REAL WOLF & INSANELY FINE 1970\'S POOL PARTY SUPERJAM', that: 'Modest Mouse' },
                { time: '10:15-10:30', what: '', which: 'Nelly', other: 'RL Grime', infinity: '', this: '', that: 'Modest Mouse' },
                { time: '10:30-10:45', what: 'Olivia Rodrigo', which: '', other: 'RL Grime', infinity: '', this: '', that: '' },
                { time: '10:45-11:00', what: 'Olivia Rodrigo', which: '', other: 'RL Grime', infinity: '', this: '', that: '' },
                { time: '11:00-11:15', what: 'Olivia Rodrigo', which: '', other: '', infinity: 'Saxsquatch', this: '', that: '' },
                { time: '11:15-11:30', what: 'Olivia Rodrigo', which: '', other: '', infinity: 'Saxsquatch', this: '', that: '' },
                { time: '11:30-11:45', what: 'Olivia Rodrigo', which: '', other: '', infinity: 'Saxsquatch', this: '', that: '' },
                { time: '11:45-12:00', what: 'Olivia Rodrigo', which: '', other: '', infinity: 'Saxsquatch', this: '', that: '' },
                { time: '12:00-12:15', what: '', which: '', other: '', infinity: '', this: '', that: '' },
                { time: '12:15-12:30', what: '', which: 'Justice', other: '', infinity: '', this: 'King Gizzard & The Lizard Wizard', that: '' },
                { time: '12:30-12:45', what: '', which: 'Justice', other: 'Crankdat', infinity: '', this: 'King Gizzard & The Lizard Wizard', that: '' },
                { time: '12:45-1:00', what: '', which: 'Justice', other: 'Crankdat', infinity: '', this: 'King Gizzard & The Lizard Wizard', that: '' },
                { time: '1:00-1:15', what: '', which: 'Justice', other: 'Crankdat', infinity: '', this: 'King Gizzard & The Lizard Wizard', that: 'Arcade Fire presents "Santa Pirata"' },
                { time: '1:15-1:30', what: '', which: 'Justice', other: 'Crankdat', infinity: '', this: 'King Gizzard & The Lizard Wizard', that: 'Arcade Fire presents "Santa Pirata"' },
                { time: '1:30-1:45', what: '', which: '', other: '', infinity: '', this: 'King Gizzard & The Lizard Wizard', that: 'Arcade Fire presents "Santa Pirata"' },
                { time: '1:45-2:00', what: '', which: '', other: '', infinity: 'Blacklizt', this: 'King Gizzard & The Lizard Wizard', that: 'Arcade Fire presents "Santa Pirata"' },
                { time: '2:00-2:15', what: '', which: '', other: '', infinity: 'Blacklizt', this: 'King Gizzard & The Lizard Wizard', that: 'Arcade Fire presents "Santa Pirata"' },
                { time: '2:15-2:30', what: '', which: '', other: 'Gorgon City', infinity: 'Blacklizt', this: '', that: '' },
                { time: '2:30-2:45', what: '', which: '', other: 'Gorgon City', infinity: 'Blacklizt', this: '', that: '' },
                { time: '2:45-3:00', what: '', which: '', other: 'Gorgon City', infinity: '', this: '', that: '' },
                { time: '3:00-3:15', what: '', which: '', other: 'Gorgon City', infinity: '', this: '', that: '' },
                { time: '3:15-3:30', what: '', which: '', other: 'Gorgon City', infinity: '', this: '', that: '' },
                { time: '3:30-3:45', what: '', which: '', other: 'Gorgon City', infinity: '', this: '', that: '' },
                { time: '3:45-4:00', what: '', which: '', other: 'Gorgon City', infinity: '', this: '', that: '' },
                { time: '4:00-4:15', what: '', which: '', other: 'Gorgon City', infinity: '', this: '', that: '' },
                { time: '4:15-4:30', what: '', which: '', other: 'Gorgon City', infinity: '', this: '', that: '' },
                { time: '4:30-4:45', what: '', which: '', other: 'Gorgon City', infinity: '', this: '', that: '' },
                { time: '4:45-5:00', what: '', which: '', other: 'Gorgon City', infinity: '', this: '', that: '' },
                { time: '5:00-5:15', what: '', which: '', other: 'Gorgon City', infinity: '', this: '', that: '' }
            ],
            sunday: [
                { time: '1:15-1:30', what: '', which: 'Alexandra Kay', other: '', infinity: '', this: 'Goldie Boutilier', that: '' },
                { time: '1:30-1:45', what: '', which: 'Alexandra Kay', other: '', infinity: '', this: 'Goldie Boutilier', that: 'Grace Bowers' },
                { time: '1:45-2:00', what: '', which: 'Alexandra Kay', other: 'YDG', infinity: '', this: 'Goldie Boutilier', that: 'Grace Bowers' },
                { time: '2:00-2:15', what: 'James Arthur', which: '', other: 'YDG', infinity: 'Photay', this: '', that: 'Grace Bowers' },
                { time: '2:15-2:30', what: 'James Arthur', which: '', other: 'YDG', infinity: 'Photay', this: '', that: '' },
                { time: '2:30-2:45', what: 'James Arthur', which: '', other: 'YDG', infinity: 'Photay', this: '', that: '' },
                { time: '2:45-3:00', what: '', which: 'Treaty Oak Revival', other: '', infinity: '', this: 'Natasha Bedingfield', that: '' },
                { time: '3:00-3:15', what: '', which: 'Treaty Oak Revival', other: 'Gorillat', infinity: '', this: 'Natasha Bedingfield', that: 'Alex Warren' },
                { time: '3:15-3:30', what: '', which: 'Treaty Oak Revival', other: 'Gorillat', infinity: '', this: 'Natasha Bedingfield', that: 'Alex Warren' },
                { time: '3:30-3:45', what: 'Role Model', which: 'Treaty Oak Revival', other: 'Gorillat', infinity: '', this: '', that: 'Alex Warren' },
                { time: '3:45-4:00', what: 'Role Model', which: '', other: 'Gorillat', infinity: 'Post Sex Nachos', this: '', that: '' },
                { time: '4:00-4:15', what: 'Role Model', which: '', other: '', infinity: 'Post Sex Nachos', this: '', that: '' },
                { time: '4:15-4:30', what: 'Role Model', which: '', other: 'Zingara', infinity: 'Post Sex Nachos', this: 'Saint Motel', that: '' },
                { time: '4:30-4:45', what: '', which: 'Rovel Otis', other: 'Zingara', infinity: '', this: 'Saint Motel', that: 'Bilmuri' },
                { time: '4:45-5:00', what: '', which: 'Rovel Otis', other: 'Zingara', infinity: '', this: 'Saint Motel', that: 'Bilmuri' },
                { time: '5:00-5:15', what: '', which: 'Rovel Otis', other: 'Zingara', infinity: '', this: 'Saint Motel', that: 'Bilmuri' },
                { time: '5:15-5:30', what: 'Remi Wolf', which: 'Rovel Otis', other: '', infinity: '', this: 'Saint Motel', that: 'Bilmuri' },
                { time: '5:30-5:45', what: 'Remi Wolf', which: '', other: 'Atliens', infinity: 'Arcdj Aftab', this: '', that: '' },
                { time: '5:45-6:00', what: 'Remi Wolf', which: '', other: 'Atliens', infinity: 'Arcdj Aftab', this: '', that: '' },
                { time: '6:00-6:15', what: 'Remi Wolf', which: '', other: 'Atliens', infinity: 'Arcdj Aftab', this: 'Barry Can\'t Swim', that: '' },
                { time: '6:15-6:30', what: '', which: 'King Gizzard & The Lizard Wizard', other: 'Atliens', infinity: 'Arcdj Aftab', this: 'Barry Can\'t Swim', that: 'Jack\'s Mannequin' },
                { time: '6:30-6:45', what: '', which: 'King Gizzard & The Lizard Wizard', other: '', infinity: 'Arcdj Aftab', this: 'Barry Can\'t Swim', that: 'Jack\'s Mannequin' },
                { time: '6:45-7:00', what: '', which: 'King Gizzard & The Lizard Wizard', other: 'Big Gigantic', infinity: '', this: 'Barry Can\'t Swim', that: 'Jack\'s Mannequin' },
                { time: '7:00-7:15', what: '', which: 'King Gizzard & The Lizard Wizard', other: 'Big Gigantic', infinity: '', this: 'Barry Can\'t Swim', that: 'Jack\'s Mannequin' },
                { time: '7:15-7:30', what: 'Vampire Weekend', which: '', other: 'Big Gigantic', infinity: 'Zingara', this: '', that: 'Jack\'s Mannequin' },
                { time: '7:30-7:45', what: 'Vampire Weekend', which: '', other: 'Big Gigantic', infinity: 'Zingara', this: '', that: '' },
                { time: '7:45-8:00', what: 'Vampire Weekend', which: '', other: '', infinity: 'Zingara', this: 'Glorilla', that: '' },
                { time: '8:00-8:15', what: 'Vampire Weekend', which: '', other: '', infinity: 'Zingara', this: 'Glorilla', that: 'Dispatch' },
                { time: '8:15-8:30', what: 'Vampire Weekend', which: 'Queens of the Stone Age', other: 'LSZEE', infinity: '', this: 'Glorilla', that: 'Dispatch' },
                { time: '8:30-8:45', what: '', which: 'Queens of the Stone Age', other: 'LSZEE', infinity: '', this: 'Glorilla', that: 'Dispatch' },
                { time: '8:45-9:00', what: '', which: 'Queens of the Stone Age', other: 'LSZEE', infinity: '', this: '', that: 'Dispatch' },
                { time: '9:00-9:15', what: '', which: 'Queens of the Stone Age', other: 'LSZEE', infinity: '', this: '', that: 'Dispatch' },
                { time: '9:15-9:30', what: '', which: 'Queens of the Stone Age', other: 'LSZEE', infinity: '', this: '', that: 'Dispatch' },
                { time: '9:30-9:45', what: 'Hozier', which: '', other: '', infinity: '', this: '', that: '' },
                { time: '9:45-10:00', what: 'Hozier', which: '', other: '', infinity: 'Washed Out', this: '', that: '' },
                { time: '10:00-10:15', what: 'Hozier', which: '', other: '', infinity: 'Washed Out', this: '', that: '' },
                { time: '10:15-10:30', what: 'Hozier', which: '', other: '', infinity: 'Washed Out', this: '', that: '' },
                { time: '10:30-10:45', what: 'Hozier', which: '', other: '', infinity: 'Washed Out', this: '', that: '' },
                { time: '10:45-11:00', what: 'Hozier', which: '', other: '', infinity: '', this: '', that: '' }
            ]
        };

        // Store comment data
        let comments = {};
        let priorities = {};  // Will now store as: { actId: { username: priority } }
        let username = localStorage.getItem('bonnarooUsername') || 'Anonymous';
        let currentDay = 'thursday';
        
        // Initialize the schedule
        function initSchedule() {
            const tableBody = document.querySelector('#schedule tbody');
            tableBody.innerHTML = '';
            
            // Set username in input
            document.getElementById('username').value = username;
            
            // Show/hide Which Stage column based on day
            const whichStageHeader = document.querySelector('th.which-stage');
            const whichStageCells = document.querySelectorAll('td.which-stage');
            if (currentDay === 'thursday') {
                whichStageHeader.style.display = 'none';
                whichStageCells.forEach(cell => cell.style.display = 'none');
            } else {
                whichStageHeader.style.display = '';
                whichStageCells.forEach(cell => cell.style.display = '');
            }
            
            // Generate schedule
            scheduleData[currentDay].forEach(row => {
                const tr = document.createElement('tr');
                
                // Time column
                const timeCell = document.createElement('td');
                timeCell.className = 'time-column';
                timeCell.textContent = row.time;
                tr.appendChild(timeCell);
                
                // What Stage
                const whatCell = createCell(row.what, 'what-stage');
                tr.appendChild(whatCell);
                
                // Which Stage (only for Friday, Saturday, Sunday)
                if (currentDay !== 'thursday') {
                    const whichCell = createCell(row.which, 'which-stage');
                    tr.appendChild(whichCell);
                }
                
                // Other Stage
                const otherCell = createCell(row.other, 'other-stage');
                tr.appendChild(otherCell);
                
                // Infinity
                const infinityCell = createCell(row.infinity, 'infinity');
                tr.appendChild(infinityCell);
                
                // This Tent
                const thisCell = createCell(row.this, 'this-tent');
                tr.appendChild(thisCell);
                
                // That Tent
                const thatCell = createCell(row.that, 'that-tent');
                tr.appendChild(thatCell);
                
                tableBody.appendChild(tr);
            });
            
            // Set up filter event listeners
            setupFilters();
            updatePriorityActsList();
        }
        
        function createCell(actName, stageClass) {
            const cell = document.createElement('td');
            cell.className = stageClass;
            
            if (actName) {
                const actId = actName.toLowerCase().replace(/[^a-z0-9]/g, '') + '-' + stageClass;
                
                const actDiv = document.createElement('div');
                actDiv.className = 'act';
                actDiv.textContent = actName;
                actDiv.dataset.act = actName;
                actDiv.dataset.stage = stageClass;
                actDiv.dataset.id = actId;
                
                // Get all users who have interacted with this act
                const interactingUsers = new Set();
                
                // Add users who commented
                if (comments[actId]) {
                    comments[actId].forEach(comment => {
                        interactingUsers.add(comment.username);
                    });
                }
                
                // Add users who set priorities
                if (priorities[actId]) {
                    Object.keys(priorities[actId]).forEach(user => {
                        interactingUsers.add(user);
                    });
                }
                
                // If there are any users, create the user list
                if (interactingUsers.size > 0) {
                    const userListDiv = document.createElement('div');
                    userListDiv.className = 'user-list';
                    
                    Array.from(interactingUsers).forEach(user => {
                        const userSpan = document.createElement('span');
                        userSpan.className = 'user-item';
                        userSpan.textContent = user;
                        
                        // Add priority styling if user has set one
                        const userPriority = priorities[actId]?.[user];
                        if (userPriority) {
                            userSpan.classList.add(`user-priority-${userPriority}`);
                        }
                        
                        userListDiv.appendChild(userSpan);
                    });
                    
                    actDiv.appendChild(userListDiv);
                }

                // Make the artist name clickable to open comments
                actDiv.onclick = function() {
                    openCommentModal(actName, stageClass);
                };
                
                cell.appendChild(actDiv);
            }
            
            return cell;
        }
        
        function openCommentModal(actName, stageClass) {
            const modal = document.getElementById('commentModal');
            const actId = actName.toLowerCase().replace(/[^a-z0-9]/g, '') + '-' + stageClass;
            
            document.getElementById('modalTitle').textContent = `Comment on ${actName}`;
            document.getElementById('modalActName').textContent = `${actName} at ${stageClass.replace('-', ' ').replace('stage', 'Stage').replace('tent', 'Tent')}`;
            
            // Update priority button states based on current user's priority
            const userPriority = priorities[actId]?.[username] || 'none';
            document.querySelectorAll('.priority-btn').forEach(btn => {
                const btnPriority = btn.textContent.toLowerCase().split(' ')[0];
                if (btnPriority === userPriority) {
                    btn.style.opacity = '1';
                    btn.style.transform = 'scale(1.05)';
                } else {
                    btn.style.opacity = '0.7';
                    btn.style.transform = 'scale(1)';
                }
            });
            
            // Set up real-time listener for comments
            const db = firebase.database();
            const commentsRef = db.ref(`activities/${actId}/comments`);
            
            // Function to update comments display
            function updateCommentsDisplay(snapshot) {
                const commentsList = document.getElementById('commentsList');
                commentsList.innerHTML = '';
                
                const commentsData = snapshot.val() || {};
                const commentArray = Object.entries(commentsData).map(([key, value]) => ({
                    ...value,
                    key // Store Firebase key for deletion
                }));
                
                if (commentArray.length > 0) {
                    commentArray.forEach(comment => {
                        const commentDiv = document.createElement('div');
                        commentDiv.className = 'comment-item';
                        
                        const usernameDiv = document.createElement('div');
                        usernameDiv.className = 'comment-username';
                        usernameDiv.textContent = comment.username + ':';
                        
                        const textDiv = document.createElement('div');
                        textDiv.className = 'comment-text';
                        textDiv.textContent = comment.text;
                        
                        commentDiv.appendChild(usernameDiv);
                        commentDiv.appendChild(textDiv);

                        // Add delete button only for the current user's comments
                        if (comment.username === username) {
                            const deleteButton = document.createElement('div');
                            deleteButton.className = 'delete-comment';
                            deleteButton.innerHTML = 'ðŸ—‘ï¸';
                            deleteButton.title = 'Delete comment';
                            deleteButton.onclick = (e) => {
                                e.stopPropagation();
                                if (confirm('Are you sure you want to delete this comment?')) {
                                    db.ref(`activities/${actId}/comments/${comment.key}`).remove();
                                }
                            };
                            commentDiv.appendChild(deleteButton);
                        }
                        
                        commentsList.appendChild(commentDiv);
                    });
                } else {
                    commentsList.innerHTML = '<div class="comment-item">No comments yet</div>';
                }
            }
            
            // Set up the real-time listener
            commentsRef.on('value', updateCommentsDisplay);
            
            // Store the reference to remove listener when modal closes
            modal.dataset.currentActId = actId;
            
            // Clear input field for new comment
            document.getElementById('commentInput').value = '';
            document.getElementById('commentInput').dataset.actId = actId;
            
            modal.style.display = 'block';
        }
        
        function closeModal() {
            const modal = document.getElementById('commentModal');
            const actId = modal.dataset.currentActId;
            
            // Remove the real-time listener for comments
            if (actId) {
                const db = firebase.database();
                db.ref(`activities/${actId}/comments`).off();
            }
            
            modal.style.display = 'none';
        }

        function saveComment() {
            const commentText = document.getElementById('commentInput').value.trim();
            const actId = document.getElementById('commentInput').dataset.actId;
            
            if (commentText) {
                const newComment = {
                    username: username,
                    text: commentText
                };
                
                // Save to Firebase under activities/{actId}/comments
                const db = firebase.database();
                db.ref(`activities/${actId}/comments`).push(newComment);
                
                // Clear the input
                document.getElementById('commentInput').value = '';
            }
        }
        
        function setPriority(level) {
            const actId = document.getElementById('commentInput').dataset.actId;
            
            // Update local priorities object
            if (!priorities[actId]) {
                priorities[actId] = {};
            }
            
            if (level === 'none') {
                delete priorities[actId][username];
                if (Object.keys(priorities[actId]).length === 0) {
                    delete priorities[actId];
                }
            } else {
                priorities[actId][username] = level;
            }
            
            // Save to Firebase under activities/{actId}/priorities/{username}
            const db = firebase.database();
            if (level === 'none') {
                db.ref(`activities/${actId}/priorities/${username}`).remove();
            } else {
                db.ref(`activities/${actId}/priorities/${username}`).set(level);
            }
            
            // Refresh the schedule
            initSchedule();
            
            // Update the modal's act div to show new priority
            const modalActName = document.getElementById('modalTitle').textContent.replace('Comment on ', '');
            const modalStage = actId.split('-').slice(1).join('-');
            openCommentModal(modalActName, modalStage);
        }
        
        function setUsername() {
            const newUsername = document.getElementById('username').value.trim();
            if (newUsername) {
                // Capitalize first letter, rest lowercase
                username = newUsername.charAt(0).toUpperCase() + newUsername.slice(1).toLowerCase();
                document.getElementById('username').value = username;  // Update input field to show standardized format
                localStorage.setItem('bonnarooUsername', username);
            }
        }
        
        function setupFilters() {
            // Day selector
            document.querySelectorAll('.day-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.day-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    currentDay = this.dataset.day;
                    initSchedule();
                });
            });
        }
        
        function updatePriorityActsList() {
            const container = document.getElementById('priorityActsList');
            container.innerHTML = '';
            
            // Get all acts that have priorities set
            const actsWithPriorities = Object.entries(priorities)
                .filter(([_, userPriorities]) => Object.keys(userPriorities).length > 0);
            
            actsWithPriorities.forEach(([actId, _]) => {
                const [actName, stageClass] = actId.split('-');
                const stageName = stageClass.replace('-', ' ').replace('stage', 'Stage').replace('tent', 'Tent');
                
                const chip = document.createElement('div');
                chip.className = `act-chip ${stageClass}`;
                chip.textContent = `${actName} (${stageName})`;
                chip.onclick = () => {
                    openCommentModal(actName, stageClass);
                };
                
                container.appendChild(chip);
            });
            
            if (actsWithPriorities.length === 0) {
                container.innerHTML = '<p>No priority acts selected yet. Click on any act to set priorities.</p>';
            }
        }
        
        // Initialize when the page loads
        window.onload = function() {
            // Load username from localStorage
            username = localStorage.getItem('bonnarooUsername') || 'Anonymous';
            
            // Set up Firebase real-time listener
            const db = firebase.database();
            db.ref('activities').on('value', snapshot => {
                const activitiesData = snapshot.val() || {};
                
                // Reset local data
                priorities = {};
                comments = {};
                
                // Process all activities
                Object.entries(activitiesData).forEach(([actId, data]) => {
                    // Process priorities
                    if (data.priorities) {
                        priorities[actId] = data.priorities;
                    }
                    
                    // Process comments
                    if (data.comments) {
                        comments[actId] = Object.values(data.comments);
                    }
                });
                
                // Update the UI
                initSchedule();
            });
            
            // Close modal when clicking outside of it
            window.onclick = function(event) {
                const modal = document.getElementById('commentModal');
                if (event.target === modal) {
                    closeModal();
                }
            };
        };
    </script>
</body>
</html>
